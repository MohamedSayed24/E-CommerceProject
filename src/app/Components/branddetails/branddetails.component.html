<!-- branddetails.component.html -->
<div class="container mx-auto px-4 py-8">
  
  <!-- Brand Header -->
  @if (brand) {
    <div class="mb-8 flex items-center gap-4 bg-white p-6 rounded-lg shadow">
      <img [src]="brand.image" [alt]="brand.name" class="w-20 h-20 object-contain">
      <div>
        <h1 class="text-3xl font-bold text-gray-800">{{ brand.name }}</h1>
        <p class="text-gray-600">{{ products.length }} Products Available</p>
      </div>
    </div>
  }

  <!-- Loading State -->
  @if (isLoading) {
    <div class="flex justify-center items-center min-h-[400px]">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>
  }

  <!-- Error Message -->
  @if (errorMessage && !isLoading) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      {{ errorMessage }}
    </div>
  }

  <!-- Products Grid -->
  @if (!isLoading && products.length > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      @for (product of products; track product._id) {
        <div class="bg-white rounded-lg shadow hover:shadow-xl transition-all duration-300 overflow-hidden group">
          
          <!-- Product Image -->
          <div class="aspect-square overflow-hidden bg-gray-100">
            <img [src]="product.imageCover" 
                 [alt]="product.title" 
                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
          </div>
          
          <!-- Product Details -->
          <div class="p-4">
            <!-- Product Title -->
            <h3 class="font-semibold text-gray-800 mb-2 line-clamp-2 h-12">
              {{ product.title }}
            </h3>
            
            <!-- Price Section -->
            <div class="flex items-center gap-2 mb-4">
              @if (product.priceAfterDiscount) {
                <span class="text-gray-400 line-through text-sm">
                  ${{ product.price }}
                </span>
                <span class="text-xl font-bold text-green-600">
                  ${{ product.priceAfterDiscount }}
                </span>
              } @else {
                <span class="text-xl font-bold text-gray-800">
                  ${{ product.price }}
                </span>
              }
            </div>
            
            <!-- Add to Cart Button -->
            <button (click)="addToCart(product)" 
                    class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">
              Add to Cart
            </button>
          </div>
        </div>
      } @empty {
        <div class="col-span-full text-center text-gray-500 py-12">
          No products available for this brand.
        </div>
      }
    </div>
  }

  <!-- Back Button -->
  <div class="mt-8 text-center">
    <button (click)="goBack()" 
            class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
      ‚Üê Back to Brands
    </button>
  </div>
</div>